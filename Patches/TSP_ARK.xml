<?xml version="1.0" encoding="utf-8" ?>

<Patch>
	<!-- Aelanna's Model No-Match Detector and Insertion Code -->
	<!-- Special thanks to Aelanna for straight-up saving me scores of headaches! -->
	<!-- Add comps field to Settlement WorldObjectDef if it doesn't exist -->
	<Operation Class="PatchOperationConditional">
		<xpath>Defs/ThingDef[defName="Nothing"]/thingClass</xpath> <!-- Not actually nothing, Ark spawn -->
		<nomatch Class="PatchOperationAdd">
			<xpath>Defs/ThingDef[defName="Nothing"]</xpath>
			<success>Always</success>
			<value>
				<thingClass>ThingWithComps</thingClass>
			</value>
		</nomatch>
	</Operation>
	
	<!-- Add comps field to Settlement WorldObjectDef if it doesn't exist -->
	<Operation Class="PatchOperationConditional">
		<xpath>Defs/ThingDef[defName="Nothing"]/tradeTags</xpath> <!-- Not actually nothing, Ark spawn -->
		<nomatch Class="PatchOperationAdd">
			<xpath>Defs/ThingDef[defName="Nothing"]</xpath>
			<success>Always</success>
			<value>
				<tradeTags></tradeTags>
			</value>
		</nomatch>
	</Operation>
	
	<!-- Add comps field to Settlement WorldObjectDef if it doesn't exist -->
	<Operation Class="PatchOperationConditional">
		<xpath>Defs/ThingDef[defName="Nothing"]/thingSetMakerTags</xpath> <!-- Not actually nothing, Ark spawn -->
		<nomatch Class="PatchOperationAdd">
			<xpath>Defs/ThingDef[defName="Nothing"]</xpath>
			<success>Always</success>
			<value>
				<thingSetMakerTags></thingSetMakerTags>
			</value>
		</nomatch>
	</Operation>
	
	<!-- Add comps field to Settlement WorldObjectDef if it doesn't exist -->
	<Operation Class="PatchOperationConditional">
		<xpath>Defs/ThingDef[defName="Nothing"]/ingestible</xpath> <!-- Not actually nothing, Ark spawn -->
		<nomatch Class="PatchOperationAdd">
			<xpath>Defs/ThingDef[defName="Nothing"]</xpath>
			<success>Always</success>
			<value>
				<ingestible></ingestible>
			</value>
		</nomatch>
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>Defs/ThingDef[defName="Nothing"]/ingestible</xpath> <!-- Not actually nothing, Ark spawn -->
		<!-- If it does, do this replacement. -->
		<match Class="PatchOperationReplace">
			<success>Always</success>
			<xpath>Defs/ThingDef[defName="Nothing"]/ingestible</xpath>
			<value>
				<ingestible>
					<foodType>Corpse</foodType>
					<preferability>NeverForNutrition</preferability>
					<ateEvent>AteNutrientPaste</ateEvent>
					<maxNumToIngestAtOnce>1</maxNumToIngestAtOnce>
					<ingestSound>Ingest_Pill</ingestSound>
					<optimalityOffsetHumanlikes>-100</optimalityOffsetHumanlikes>
					<optimalityOffsetFeedingAnimals>-100</optimalityOffsetFeedingAnimals>
				</ingestible>
			</value>
		</match>
	</Operation>

	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>Defs/ThingDef[defName="Nothing"]</xpath> <!-- Not actually nothing, Ark spawn -->
		<!-- If it does, do this replacement. -->
		<match Class="PatchOperationReplace">
			<success>Always</success>
			<xpath>Defs/ThingDef[defName="Nothing"]/comps</xpath>
			<value>
				<comps Inherit="False">
					<li Class="CompProperties_Usable">
						<useJob>UseItem</useJob>
						<useLabel>Activate!</useLabel>
						<useDuration>510</useDuration>
					</li>
					<li Class="CompProperties_Hatcher">
						<hatcherDaystoHatch>2</hatcherDaystoHatch>
						<hatcherPawn>PlayerArk</hatcherPawn>
					</li>
					<li Class="StoryTime.CompProperties_SpawnPawn">
						<compClass>StoryTime.CompUseEffect_SpawnPerson</compClass>
						<pawnKind>PlayerArk</pawnKind>
					</li>
					<li Class="CompProperties_UseEffect">
						<compClass>CompUseEffect_DestroySelf</compClass>
					</li>
					<li Class="CompProperties_Studiable" MayRequire="Ludeon.RimWorld.Anomaly">
						<frequencyTicks>130000</frequencyTicks>
						<knowledgeCategory>Advanced</knowledgeCategory>
						<minMonolithLevelForStudy>1</minMonolithLevelForStudy>
						<anomalyKnowledge>1</anomalyKnowledge>
						<requiresHoldingPlatform>false</requiresHoldingPlatform>
						<requiresImprisonment>false</requiresImprisonment>
					</li>
				</comps>
			</value>
		</match>
	</Operation>
	
	<Operation Class="PatchOperationConditional">
		<xpath>Defs/ThingDef[defName="humanT"]/thingClass</xpath> <!-- Not actually nothing, Ark spawn -->
		<nomatch Class="PatchOperationAdd">
			<xpath>Defs/ThingDef[defName="humanT"]</xpath>
			<success>Always</success>
			<value>
				<thingClass>ThingWithComps</thingClass>
			</value>
		</nomatch>
	</Operation>
	
	<!-- Add comps field to Settlement WorldObjectDef if it doesn't exist -->
	<Operation Class="PatchOperationConditional">
		<xpath>Defs/ThingDef[defName="humanT"]/tradeTags</xpath> <!-- Not actually nothing, Ark spawn -->
		<nomatch Class="PatchOperationAdd">
			<xpath>Defs/ThingDef[defName="humanT"]</xpath>
			<success>Always</success>
			<value>
				<tradeTags></tradeTags>
			</value>
		</nomatch>
	</Operation>
	
	<!-- Add comps field to Settlement WorldObjectDef if it doesn't exist -->
	<Operation Class="PatchOperationConditional">
		<xpath>Defs/ThingDef[defName="humanT"]/thingSetMakerTags</xpath> <!-- Not actually nothing, Ark spawn -->
		<nomatch Class="PatchOperationAdd">
			<xpath>Defs/ThingDef[defName="humanT"]</xpath>
			<success>Always</success>
			<value>
				<thingSetMakerTags></thingSetMakerTags>
			</value>
		</nomatch>
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>Defs/ThingDef[defName="humanT"]</xpath> <!-- Not actually nothing, Ark spawn -->
		<!-- If it does, do this replacement. -->
		<match Class="PatchOperationReplace">
			<success>Always</success>
			<xpath>Defs/ThingDef[defName="humanT"]/comps</xpath>
			<value>
				<comps Inherit="False">
					<li Class="CompProperties_Usable">
						<useJob>UseItem</useJob>
						<useLabel>Activate!</useLabel>
						<useDuration>90</useDuration>
					</li>
					<li Class="StoryTime.CompProperties_SpawnPawn">
						<compClass>StoryTime.CompUseEffect_SpawnPerson</compClass>
						<pawnKind>Tribesperson</pawnKind>

					</li>
					<li Class="CompProperties_UseEffect">
						<compClass>CompUseEffect_DestroySelf</compClass>
					</li>
					<li Class="CompProperties_Studiable" MayRequire="Ludeon.RimWorld.Anomaly">
						<frequencyTicks>60000</frequencyTicks>
						<knowledgeCategory>Basic</knowledgeCategory>
						<minMonolithLevelForStudy>1</minMonolithLevelForStudy>
						<anomalyKnowledge>1</anomalyKnowledge>
						<requiresHoldingPlatform>false</requiresHoldingPlatform>
						<requiresImprisonment>false</requiresImprisonment>
					</li>
					<li Class="CompProperties_Hatcher">
						<hatcherDaystoHatch>2</hatcherDaystoHatch>
						<hatcherPawn>Tribesperson</hatcherPawn>
					</li>
				</comps>
			</value>
		</match>
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>Defs/ThingDef[defName="Nothing"]/tradeTags</xpath> <!-- Not actually nothing, Ark spawn -->
		<!-- If it does, add this. -->
		<match Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>Defs/ThingDef[defName="Nothing"]/tradeTags</xpath>
			<value>
				<li>RewardSpecial</li>
				<li>Artifact</li>
			</value>
		</match>
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>Defs/ThingDef[defName="Nothing"]/thingSetMakerTags</xpath> <!-- Not actually nothing, Ark spawn -->
		<!-- If it does, add this. -->
		<match Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>Defs/ThingDef[defName="Nothing"]/thingSetMakerTags</xpath>
			<value>
				<li>AnimalPart</li>
				<li>RewardSpecial</li>
				<li>Artifact</li>
				<li>RewardStandardQualitySuper</li>
			</value>
		</match>
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>Defs/ThingDef[defName="humanT"]/tradeTags</xpath> <!-- Not actually nothing, Ark spawn -->
		<!-- If it does, add this. -->
		<match Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>Defs/ThingDef[defName="humanT"]/tradeTags</xpath>
			<value>
				<li>RewardSpecial</li>
				<li>Artifact</li>
			</value>
		</match>
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>Defs/ThingDef[defName="humanT"]/thingSetMakerTags</xpath> <!-- Not actually nothing, Ark spawn -->
		<!-- If it does, add this. -->
		<match Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>Defs/ThingDef[defName="humanT"]/thingSetMakerTags</xpath>
			<value>
				<li>AnimalPart</li>
				<li>RewardSpecial</li>
				<li>Artifact</li>
				<li>RewardStandardQualitySuper</li>
			</value>
		</match>
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>Defs/ThingDef[defName="Nothing"]/statBases</xpath> <!-- Not actually nothing, Ark spawn -->
		<!-- If it does, do this replacement. -->
		<match Class="PatchOperationReplace">
			<success>Always</success>
			<xpath>Defs/ThingDef[defName="Nothing"]/statBases</xpath>
			<value>
				<statBases>
					<Mass>20</Mass>
					<MarketValue>20</MarketValue>
					<Beauty>1</Beauty>
					<WorkToMake>12200</WorkToMake>
				</statBases>
			</value>
		</match>
	</Operation>
	
	<!-- Add comps field to Settlement WorldObjectDef if it doesn't exist -->
	<Operation Class="PatchOperationConditional">
		<xpath>Defs/PawnKindDef[defName="2Ark"]/minGenerationAge</xpath>
		<nomatch Class="PatchOperationAdd">
			<xpath>Defs/PawnKindDef[defName="2Ark"]</xpath>
			<success>Always</success>
			<value>
				<minGenerationAge>7</minGenerationAge>
			</value>
		</nomatch>
	</Operation>
	
	<!-- Add comps field to Settlement WorldObjectDef if it doesn't exist -->
	<Operation Class="PatchOperationConditional">
		<xpath>Defs/PawnKindDef[defName="PlayerArk"]/minGenerationAge</xpath>
		<nomatch Class="PatchOperationAdd">
			<xpath>Defs/PawnKindDef[defName="PlayerArk"]</xpath>
			<success>Always</success>
			<value>
				<minGenerationAge>7</minGenerationAge>
			</value>
		</nomatch>
	</Operation>
	
	<!-- Add comps field to Settlement WorldObjectDef if it doesn't exist -->
	<Operation Class="PatchOperationConditional">
		<xpath>Defs/PawnKindDef[defName="2Ark"]/pawnGroupDevelopmentStage</xpath>
		<nomatch Class="PatchOperationAdd">
			<xpath>Defs/PawnKindDef[defName="2Ark"]</xpath>
			<success>Always</success>
			<value>
				<pawnGroupDevelopmentStage>Adult</pawnGroupDevelopmentStage>
			</value>
		</nomatch>
	</Operation>
	
	<!-- Add comps field to Settlement WorldObjectDef if it doesn't exist -->
	<Operation Class="PatchOperationConditional">
		<xpath>Defs/PawnKindDef[defName="PlayerArk"]/pawnGroupDevelopmentStage</xpath>
		<nomatch Class="PatchOperationAdd">
			<xpath>Defs/PawnKindDef[defName="PlayerArk"]</xpath>
			<success>Always</success>
			<value>
				<pawnGroupDevelopmentStage>Adult</pawnGroupDevelopmentStage>
			</value>
		</nomatch>
	</Operation>
	
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>Defs/ThingDef[@Name="ArkRace"]/race/lifeStageAges</xpath>
		<!-- If it does, do this replacement. -->
		<match Class="PatchOperationReplace">
			<success>Always</success>
			<xpath>Defs/ThingDef[@Name="ArkRace"]/race/lifeStageAges</xpath>
			<value>
				<lifeStageAges>
					<li>
						<def>HumanlikeChild</def>
						<minAge>0</minAge>
					</li>
					<li MayRequire="Ludeon.RimWorld.Biotech">
						<def>HumanlikePreTeenager</def>
						<minAge>0.01</minAge>
					</li>
					<li>
						<def>HumanlikeTeenager</def>
						<minAge>0.1</minAge>
					</li>
					<li>
						<def>HumanlikeAdult</def>
						<minAge>3</minAge>
					</li>
				</lifeStageAges>
			</value>
		</match>
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>Defs/ThingDef[@Name="ArkRace"]/race/lifeStageWorkSettings</xpath>
		<!-- If it does, do this replacement. -->
		<match Class="PatchOperationReplace">
			<success>Always</success>
			<xpath>Defs/ThingDef[@Name="ArkRace"]/race/lifeStageWorkSettings</xpath>
			<value>
				<lifeStageWorkSettings MayRequire="Ludeon.RimWorld.Biotech">
					<Firefighter>2</Firefighter>
					<Patient>0</Patient>
					<Doctor>1</Doctor>
					<PatientBedRest>0</PatientBedRest>
					<Childcare MayRequire="Ludeon.RimWorld.Biotech">0</Childcare>
					<BasicWorker>0</BasicWorker>
					<Warden>3</Warden>
					<Handling>0</Handling>
					<Cooking>0</Cooking>
					<Hunting>2</Hunting>
					<Construction>0</Construction>
					<Growing>0</Growing>
					<Mining>0</Mining>
					<PlantCutting>0</PlantCutting>
					<Smithing>3</Smithing>
					<Tailoring>0</Tailoring>
					<Art>3</Art>
					<Crafting>0</Crafting>
					<Hauling>0</Hauling>
					<Cleaning>0</Cleaning>
					<Research>1</Research>
					<DarkStudy MayRequire="Ludeon.RimWorld.Anomaly">3</DarkStudy>
				</lifeStageWorkSettings>
			</value>
		</match>
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>Defs/ThingDef[@Name="ArkRace"]/race/ageGenerationCurve</xpath>
		<!-- If it does, do this replacement. -->
		<match Class="PatchOperationReplace">
			<success>Always</success>
			<xpath>Defs/ThingDef[@Name="ArkRace"]/race/ageGenerationCurve</xpath>
			<value>
				<ageGenerationCurve Inherit="False">
					<points Inherit="False">
						<li>(0,0)</li>
						<li>(1,0.01)</li>
						<li>(2,20)</li>
						<li>(3,200)</li>  
						<li>(5,230)</li>  
						<li>(14,218)</li>
						<li>(16,10)</li>
						<li>(21,100)</li>
						<li>(50,10)</li>
						<li>(60,30)</li>
						<li>(70,108)</li>
						<li>(80,100)</li>
						<li>(90,30)</li>
						<li>(100,10)</li>
						<li>(120,10)</li>
						<li>(180,10)</li>
						<li>(210,10)</li>
						<li>(288,10)</li>
						<li>(300,0)</li>
						<li>(500,0)</li>
					</points>
				</ageGenerationCurve>
			</value>
		</match>
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>Defs/AlienRace.ThingDef_AlienRace[defName="ArkRace"]/alienRace/generalSettings/growthAges</xpath>
		<!-- If it does, do this replacement. -->
		<match Class="PatchOperationReplace">
			<success>Always</success>
			<xpath>Defs/AlienRace.ThingDef_AlienRace[defName="ArkRace"]/alienRace/generalSettings/growthAges</xpath>
			<value>
				<growthAges>
					<li>1.1</li>
					<li>1.55</li>
					<li>2</li>
					<li>2.5</li>
					<li>2.75</li>
					<li>3</li>
				</growthAges>
			</value>
		</match>
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>Defs/ThingDef[@Name="ArkRace"]/statBases/LearningRateFactor</xpath>
		<!-- If it does, do this replacement. -->
		<match Class="PatchOperationReplace">
			<success>Always</success>
			<xpath>Defs/ThingDef[@Name="ArkRace"]/statBases/LearningRateFactor</xpath>
			<value>
				<LearningRateFactor MayRequire="ludeon.rimworld.biotech">7</LearningRateFactor>
			</value>
		</match>
		<!-- If it DOES NOT, add this instead. -->
		<nomatch Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>Defs/ThingDef[@Name="ArkRace"]/statBases/LearningRateFactor</xpath>
			<value>
				<LearningRateFactor MayRequire="ludeon.rimworld.biotech">7</LearningRateFactor>
			</value>
		</nomatch>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>Defs/ThingDef[@Name="ArkRace"]/statBases/WorkSpeedGlobalOffsetMech</xpath>
		<!-- If it does, do this replacement. -->
		<match Class="PatchOperationReplace">
			<success>Always</success>
			<xpath>Defs/ThingDef[@Name="ArkRace"]/statBases/WorkSpeedGlobalOffsetMech</xpath>
			<value>
				<WorkSpeedGlobalOffsetMech MayRequire="ludeon.rimworld.biotech">0.15</WorkSpeedGlobalOffsetMech>
			</value>
		</match>
		<!-- If it DOES NOT, add this instead. -->
		<nomatch Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>Defs/ThingDef[@Name="ArkRace"]/statBases/WorkSpeedGlobalOffsetMech</xpath>
			<value>
				<WorkSpeedGlobalOffsetMech MayRequire="ludeon.rimworld.biotech">0.15</WorkSpeedGlobalOffsetMech>
			</value>
		</nomatch>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>Defs/ThingDef[@Name="ArkRace"]/statBases/GrowthVatOccupantSpeed</xpath>
		<!-- If it does, do this replacement. -->
		<match Class="PatchOperationReplace">
			<success>Always</success>
			<xpath>Defs/ThingDef[@Name="ArkRace"]/statBases/GrowthVatOccupantSpeed</xpath>
			<value>
				<GrowthVatOccupantSpeed MayRequire="ludeon.rimworld.biotech">5</GrowthVatOccupantSpeed>
			</value>
		</match>
		<!-- If it DOES NOT, add this instead. -->
		<nomatch Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>Defs/ThingDef[@Name="ArkRace"]/statBases/GrowthVatOccupantSpeed</xpath>
			<value>
				<GrowthVatOccupantSpeed MayRequire="ludeon.rimworld.biotech">5</GrowthVatOccupantSpeed>
			</value>
		</nomatch>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>Defs/ThingDef[@Name="ArkRace"]/statBases/RawNutritionFactor</xpath>
		<!-- If it does, do this replacement. -->
		<match Class="PatchOperationReplace">
			<success>Always</success>
			<xpath>Defs/ThingDef[@Name="ArkRace"]/statBases/RawNutritionFactor</xpath>
			<value>
				<RawNutritionFactor MayRequire="ludeon.rimworld.biotech">0.15</RawNutritionFactor>
			</value>
		</match>
		<!-- If it DOES NOT, add this instead. -->
		<nomatch Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>Defs/ThingDef[@Name="ArkRace"]/statBases/RawNutritionFactor</xpath>
			<value>
				<RawNutritionFactor MayRequire="ludeon.rimworld.biotech">0.15</RawNutritionFactor>
			</value>
		</nomatch>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>Defs/ThingDef[@Name="ArkRace"]/statBases/SubcoreEncodingSpeed</xpath>
		<!-- If it does, do this replacement. -->
		<match Class="PatchOperationReplace">
			<success>Always</success>
			<xpath>Defs/ThingDef[@Name="ArkRace"]/statBases/SubcoreEncodingSpeed</xpath>
			<value>
				<SubcoreEncodingSpeed MayRequire="ludeon.rimworld.biotech">3</SubcoreEncodingSpeed>
			</value>
		</match>
		<!-- If it DOES NOT, add this instead. -->
		<nomatch Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>Defs/ThingDef[@Name="ArkRace"]/statBases/SubcoreEncodingSpeed</xpath>
			<value>
				<SubcoreEncodingSpeed MayRequire="ludeon.rimworld.biotech">3</SubcoreEncodingSpeed>
			</value>
		</nomatch>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>Defs/ThingDef[@Name="ArkRace"]/statBases/MechRepairSpeed</xpath>
		<!-- If it does, do this replacement. -->
		<match Class="PatchOperationReplace">
			<success>Always</success>
			<xpath>Defs/ThingDef[@Name="ArkRace"]/statBases/MechRepairSpeed</xpath>
			<value>MechRepairSpeed
				<MechRepairSpeed MayRequire="ludeon.rimworld.biotech">3</MechRepairSpeed>
			</value>
		</match>
		<!-- If it DOES NOT, add this instead. -->
		<nomatch Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>Defs/ThingDef[@Name="ArkRace"]/statBases/MechRepairSpeed</xpath>
			<value>
				<MechRepairSpeed MayRequire="ludeon.rimworld.biotech">3</MechRepairSpeed>
			</value>
		</nomatch>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>Defs/ThingDef[@Name="ArkRace"]/statBases/MechFormingSpeed</xpath>
		<!-- If it does, do this replacement. -->
		<match Class="PatchOperationReplace">
			<success>Always</success>
			<xpath>Defs/ThingDef[@Name="ArkRace"]/statBases/MechFormingSpeed</xpath>
			<value>
				<MechFormingSpeed MayRequire="ludeon.rimworld.biotech">2</MechFormingSpeed>
			</value>
		</match>
		<!-- If it DOES NOT, add this instead. -->
		<nomatch Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>Defs/ThingDef[@Name="ArkRace"]/statBases/MechFormingSpeed</xpath>
			<value>
				<MechFormingSpeed MayRequire="ludeon.rimworld.biotech">2</MechFormingSpeed>
			</value>
		</nomatch>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>Defs/ThingDef[@Name="ArkRace"]/statBases/MechBandwidth</xpath>
		<!-- If it does, do this replacement. -->
		<match Class="PatchOperationReplace">
			<success>Always</success>
			<xpath>Defs/ThingDef[@Name="ArkRace"]/statBases/MechBandwidth</xpath>
			<value>
				<MechBandwidth MayRequire="ludeon.rimworld.biotech">2</MechBandwidth>
			</value>
		</match>
		<!-- If it DOES NOT, add this instead. -->
		<nomatch Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>Defs/ThingDef[@Name="ArkRace"]/statBases/MechBandwidth</xpath>
			<value>
				<MechBandwidth MayRequire="ludeon.rimworld.biotech">2</MechBandwidth>
			</value>
		</nomatch>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
</Patch>