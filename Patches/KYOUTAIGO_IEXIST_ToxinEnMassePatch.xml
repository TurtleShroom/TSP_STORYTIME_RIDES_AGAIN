<?xml version="1.0" encoding="utf-8" ?>

<!-- This code was provided by the user 'I Exist', and then butchered and simplified on Dub's Discord chat room by Kyoutaigo -->

<Patch>
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
	<xpath>/Defs/ThingDef[defName="Romy_RawToxipods"]</xpath>
		<!-- If it does, LET'S FASTING GOOOOOOOOOO!!! -->
		<match Class="PatchOperationSequence">
			<!-- <success>Always</success> -->
			<operations>
				<li Class="PatchOperationInsert">
					<xpath>/Defs/RecipeDef/ingredients/li/filter/thingDefs/li[text()="Romy_Toxin"]</xpath>
					<success>Always</success>
					<value>
						<li MayRequire="TSP.Isengriff.Storytime">ST_PoisonExtract</li>
						<li MayRequire="TSP.Isengriff.Storytime">ST_NightFrog_Venom</li>
					</value>
				</li>
				
				<li Class="PatchOperationInsert">
					<xpath>/Defs/RecipeDef/fixedIngredientFilter/thingDefs/li[text()="Romy_Toxin"]</xpath>
					<success>Always</success>
					<value>
						<li MayRequire="TSP.Isengriff.Storytime">ST_PoisonExtract</li>
						<li MayRequire="TSP.Isengriff.Storytime">ST_NightFrog_Venom</li>
					</value>
				</li>
				
				<li Class="PatchOperationInsert">
					<xpath>/Defs/RecipeDef/defaultIngredientFilter/thingDefs/li[text()="Romy_Toxin"]</xpath>
					<success>Always</success>
					<value>
						<li MayRequire="TSP.Isengriff.Storytime">ST_PoisonExtract</li>
						<li MayRequire="TSP.Isengriff.Storytime">ST_NightFrog_Venom</li>
					</value>
				</li>
				
				<li Class="PatchOperationInsert">
					<xpath>/Defs/RecipeDef/ingredients/li/filter/thingDefs/li[text()="Romy_Toxin"]</xpath>
					<success>Always</success>
					<value>
						<li MayRequire="TSP.Isengriff.Storytime">ST_PoisonExtract</li>
						<li MayRequire="TSP.Isengriff.Storytime">ST_NightFrog_Venom</li>
					</value>
				</li>
				
				<li Class="PatchOperationInsert">
					<xpath>/Defs/RecipeDef/fixedIngredientFilter/thingDefs/li[text()="Romy_Toxin"]</xpath>
					<success>Always</success>
					<value>
						<li MayRequire="TSP.Isengriff.Storytime">ST_PoisonExtract</li>
						<li MayRequire="TSP.Isengriff.Storytime">ST_NightFrog_Venom</li>
					</value>
				</li>
				
				<li Class="PatchOperationInsert">
					<xpath>/Defs/RecipeDef/defaultIngredientFilter/thingDefs/li[text()="Romy_Toxin"]</xpath>
					<success>Always</success>
					<value>
						<li MayRequire="TSP.Isengriff.Storytime">ST_PoisonExtract</li>
						<li MayRequire="TSP.Isengriff.Storytime">ST_NightFrog_Venom</li>
					</value>
				</li>
			</operations>
		</match>
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>/Defs/ThingDef[defName="Romy_RawToxipods"]</xpath>
		<!-- If it does, LET'S FASTING GOOOOOOOO!! -->
		<match Class="PatchOperationSequence"> 
			<operations>
				<li Class="PatchOperationRemove">
					<success>Always</success>
					<xpath>/Defs/TraderKindDef/stockGenerators/li[thingDef="Romy_Toxin"]</xpath>
				</li>
				<li Class="PatchOperationRemove">
					<success>Always</success>
					<xpath>/Defs/TraderKindDef/stockGenerators/li[thingDef="Romy_Toxin"]</xpath>
				</li>
				<!--
				<li Class="PatchOperationRemove">
					<success>Always</success>
					<xpath>/Defs/ThingDef[defName="Romy_Toxin"]</xpath>
				</li>
				-->
				<li Class="PatchOperationRemove">
					<success>Always</success>
					<xpath>/Defs/RecipeDef/ingredients/li/filter/thingDefs/li[text()="Romy_Toxin"]</xpath>
				</li>
				<li Class="PatchOperationRemove">
					<success>Always</success>
					<xpath>/Defs/RecipeDef/fixedIngredientFilter/thingDefs/li[text()="Romy_Toxin"]</xpath>
				</li>
				<li Class="PatchOperationRemove">
					<success>Always</success>
					<xpath>/Defs/RecipeDef/defaultIngredientFilter/thingDefs/li[text()="Romy_Toxin"]</xpath>
				</li>
				<li Class="PatchOperationRemove">
					<success>Always</success>
					<xpath>/Defs/TraderKindDef/stockGenerators/li[thingDef="Romy_Toxin"]</xpath>
				</li>
				<li Class="PatchOperationRemove">
					<success>Always</success>
					<xpath>/Defs/RecipeDef/fixedIngredientFilter/thingDefs/li[text()="Romy_Toxin"]</xpath>
				</li>
				<li Class="PatchOperationRemove">
					<success>Always</success>
					<xpath>/Defs/*/li[text()="Romy_Toxin"]</xpath>
				</li>
				<li Class="PatchOperationRemove">
					<success>Always</success>
					<xpath>/Defs/*/li[text()="Romy_Toxin"]</xpath>
				</li>
				<li Class="PatchOperationRemove">
					<success>Always</success>
					<xpath>/Defs/ThingDef//li[text()="Romy_Toxin"]</xpath>
				</li>
				<li Class="PatchOperationRemove">
					<success>Always</success>
					<xpath>/Defs/RecipeDef//li[text()="Romy_Toxin"]</xpath>
				</li>
				<li Class="PatchOperationReplace">
					<success>Always</success>
					<xpath>/Defs/RecipeDef/costList/Romy_Toxin</xpath>
					<value>
						<ST_PoisonExtract MayRequire="TSP.Isengriff.Storytime">25</ST_PoisonExtract>
					</value>
				</li>
				<li Class="PatchOperationReplace">
					<success>Always</success>
					<xpath>/Defs/RecipeDef/products/Romy_Toxin</xpath>
					<value>
						<ST_PoisonExtract MayRequire="TSP.Isengriff.Storytime">25</ST_PoisonExtract>
					</value>
				</li>
				<li Class="PatchOperationReplace">
					<success>Always</success>
					<xpath>/Defs/RecipeDef[defName="Romy_ToxinProductionToxipod"]/products/Romy_Toxin</xpath>
					<value>
						<ST_PoisonExtract MayRequire="TSP.Isengriff.Storytime">15</ST_PoisonExtract>
					</value>
				</li>
				<li Class="PatchOperationReplace">
					<success>Always</success>
					<xpath>/Defs/RecipeDef[defName="Romy_ToxinProductionWastepack"]/products/Romy_Toxin</xpath>
					<value>
						<ST_PoisonExtract MayRequire="TSP.Isengriff.Storytime">25</ST_PoisonExtract>
					</value>
				</li>
				<li Class="PatchOperationReplace">
					<success>Always</success>
					<xpath>/Defs/RecipeDef[defName="Romy_ToxinProductionWastepack"]/products/Romy_Toxin</xpath>
					<value>
						<ST_PoisonExtract MayRequire="TSP.Isengriff.Storytime">25</ST_PoisonExtract>
					</value>
				</li>
				<!--
				<li Class="PatchOperationRemove">
					<success>Always</success>
					<xpath>/Defs/ThingDef[defName="Romy_Toxin"]</xpath>
				</li>
				-->
				<li Class="PatchOperationReplace">
					<success>Always</success>
					<xpath>/Defs/ThingDef[defName="Romy_Toxin"]</xpath>
					<value>
						<ThingDef ParentName="BaseFilth">
							<defName>Romy_Toxin</defName>
							<label>Romy Toxin (ERROR)</label>
							<description>If you see this in the game, notify TurtleShroom. You are not supposed to see this.</description>
							<graphicData>
								<texPath>Things/Item/Resource/Toxin</texPath>
								<graphicClass>Graphic_StackCount</graphicClass>
								<color>(255,255,255)</color>
							</graphicData>
							<!--
							<soundInteract>Metal_Drop</soundInteract>
							<soundDrop>Metal_Drop</soundDrop>
							-->
							<filth>
								<cleaningSound>Metal_Drop</cleaningSound>
							</filth>
							<statBases>
								<Flammability>0</Flammability>
								<Beauty>1</Beauty>
								<Cleanliness>0</Cleanliness>
							</statBases>
							<selectable Inherit="False">true</selectable>
							<tradeability>None</tradeability>
							<useHitPoints>false</useHitPoints>
						</ThingDef>
					</value>
				</li>
			</operations>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. All according to plan. -->
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
	<xpath>/Defs/RecipeDef[defName="Romy_ToxinProductionToxipod"]</xpath>
		<!-- If it does, do this replacement. -->
		<match Class="PatchOperationReplace">
			<success>Always</success>
			<xpath>/Defs/RecipeDef[defName = "Romy_ToxinProductionToxipod" or defName = "Romy_ToxinProductionWastepack" or defName = "Romy_Make_Antidote"]/researchPrerequisite</xpath>
			<value>
				<researchPrerequisites>
					<li MayRequire="ludeon.rimworld.biotech">ToxGas</li>
				</researchPrerequisites>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
	<xpath>/Defs/RecipeDef[defName="Romy_ToxinProductionToxipod"]</xpath>
		<!-- If it does, do this replacement. -->
		<match Class="PatchOperationReplace">
			<success>Always</success>
			<xpath>/Defs/RecipeDef[defName = "Romy_ToxinProductionToxipod" or defName = "Romy_ToxinProductionWastepack" or defName = "Romy_Make_Antidote"]/researchPrerequisite</xpath>
			<value>
				<researchPrerequisites>
					<li MayRequire="ludeon.rimworld.biotech">ToxGas</li>
				</researchPrerequisites>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
	<xpath>/Defs/RecipeDef[defName="Romy_ToxinProductionToxipod"]</xpath>
		<!-- If it does, do this replacement. -->
		<match Class="PatchOperationReplace">
			<success>Always</success>
			<xpath>/Defs/RecipeDef[defName = "Romy_ToxinProductionToxipod" or defName = "Romy_ToxinProductionWastepack" or defName = "Romy_Make_Antidote"]/researchPrerequisite</xpath>
			<value>
				<researchPrerequisites>
					<li MayRequire="ludeon.rimworld.biotech">ToxGas</li>
				</researchPrerequisites>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	<!-- Aelanna's Model No-Match Detector and Insertion Code -->
	<!-- Special thanks to Aelanna for straight-up saving me scores of headaches! -->
	<!-- Add comps field to Settlement WorldObjectDef if it doesn't exist -->
	<Operation Class="PatchOperationConditional">
		<xpath>/Defs/ThingDef[defName="Toxalope"]/comps</xpath>
		<nomatch Class="PatchOperationAdd">
			<xpath>/Defs/ThingDef[defName="Toxalope"]</xpath>
			<success>Always</success>
			<value>
				<comps></comps>
			</value>
		</nomatch>
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
	<xpath>/Defs/ThingDef[defName="Toxalope"]</xpath>
		<!-- If it does, do this replacement. -->
		<match Class="PatchOperationReplace">
			<success>Always</success>
			<xpath>/Defs/ThingDef[defName="Toxalope"]/comps</xpath>
			<value>
				<comps>
					<li Class="AnimalBehaviours.CompProperties_AnimalProduct">
						<resourceDef>ST_PoisonExtract</resourceDef>
						<gatheringIntervalDays>1</gatheringIntervalDays>
						<resourceAmount>3</resourceAmount>
						<customResourceString>PoisonGather</customResourceString>
					</li>
				</comps>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
	<xpath>/Defs/ThingDef[defName="Apparel_PackTox"]</xpath>
		<!-- If it does, do this replacement. -->
		<match Class="PatchOperationReplace">
			<success>Always</success>
			<xpath>/Defs/ThingDef[defName="Apparel_PackTox"]/costList</xpath>
			<value>
				<costStuffCount Inherit="False">15</costStuffCount>
				<stuffCategories>
					<li>Metallic</li>

					<!-- Mod support -->
					<li MayRequire="TaosChagic.Igloo">Snowy</li>
					<li MayRequire="Dubwise.Rimefeller">Plastic</li>
					<li MayRequire="Dubwise.Rimefeller">Composite</li>
					<li MayRequire="sarg.alphabiomes">AB_Exotic</li>
					<li MayRequire="sarg.alphabiomes">AB_ExoticMetals</li>
					<li MayRequire="biomesteam.biomescore">BMT_ChitinStuff</li>
					<li MayRequire="sarg.rimbees">RB_Waxy</li>
					<li MayRequire="eltwofour.mantodeanrace">MantodeanOrganic</li>
				</stuffCategories>
				<costList>
					<ST_PoisonExtract MayRequire="TSP.Isengriff.Storytime">4</ST_PoisonExtract>
					<ComponentIndustrial>1</ComponentIndustrial>
				</costList>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
	<xpath>/Defs/ThingDef[defName="Apparel_PackTox"]</xpath>
		<!-- If it does, do this replacement. -->
		<match Class="PatchOperationReplace">
			<success>Always</success>
			<xpath>/Defs/ThingDef[defName="Apparel_PackTox"]/comps/li/ammoDef</xpath>
			<value>
				<ammoDef>ST_PoisonExtract</ammoDef>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- DO THE GENTILES KNOW? -->
	<xpath>/Defs/ThingDef[defName="Romy_RawToxipods"]</xpath>
		<!-- If they do, SHUT IT DOWN. -->
		<match Class="PatchOperationRemove">
			<success>Always</success>
			<xpath>/Defs/ThingDef[defName="Shell_Toxic"]/costListForDifficulty</xpath>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. All according to plan. -->
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
	<xpath>/Defs/ThingDef[defName="Shell_Toxic"]</xpath>
		<!-- If it does, do this replacement. -->
		<match Class="PatchOperationReplace">
			<success>Always</success>
			<xpath>/Defs/ThingDef[defName="Shell_Toxic"]/costList</xpath>
			<value>
				<costStuffCount Inherit="False">15</costStuffCount>
				<stuffCategories>
					<li>Metallic</li>

					<!-- Mod support -->
					<li MayRequire="TaosChagic.Igloo">Snowy</li>
					<li MayRequire="Dubwise.Rimefeller">Plastic</li>
					<li MayRequire="Dubwise.Rimefeller">Composite</li>
					<li MayRequire="sarg.alphabiomes">AB_Exotic</li>
					<li MayRequire="sarg.alphabiomes">AB_ExoticMetals</li>
					<li MayRequire="biomesteam.biomescore">BMT_ChitinStuff</li>
					<li MayRequire="sarg.rimbees">RB_Waxy</li>
					<li MayRequire="eltwofour.mantodeanrace">MantodeanOrganic</li>
				</stuffCategories>
				<costList>
					<ST_PoisonExtract MayRequire="TSP.Isengriff.Storytime">5</ST_PoisonExtract>
					<Chemfuel>5</Chemfuel>
					<ComponentIndustrial>1</ComponentIndustrial>
				</costList>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
	<xpath>/Defs/ThingDef[defName="Gun_ToxbombLauncher"]</xpath>
		<!-- If it does, do this replacement. -->
		<match Class="PatchOperationReplace">
			<success>Always</success>
			<xpath>/Defs/ThingDef[defName="Gun_ToxbombLauncher"]/costList</xpath>
			<value>
				<costStuffCount Inherit="False">75</costStuffCount>
				<stuffCategories>
					<li>Metallic</li>

					<!-- Mod support -->
					<li MayRequire="Dubwise.Rimefeller">Plastic</li>
					<li MayRequire="Dubwise.Rimefeller">Composite</li>
					<li MayRequire="sarg.alphabiomes">AB_Exotic</li>
					<li MayRequire="sarg.alphabiomes">AB_ExoticMetals</li>
					<li MayRequire="biomesteam.biomescore">BMT_ChitinStuff</li>
					<li MayRequire="eltwofour.mantodeanrace">MantodeanOrganic</li>
				</stuffCategories>
				<costList>
					<ST_PoisonExtract MayRequire="TSP.Isengriff.Storytime">5</ST_PoisonExtract>
				</costList>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
	<xpath>/Defs/ThingDef[defName="Weapon_GrenadeTox"]</xpath>
		<!-- If it does, do this replacement. -->
		<match Class="PatchOperationReplace">
			<success>Always</success>
			<xpath>/Defs/ThingDef[defName="Weapon_GrenadeTox"]/costList</xpath>
			<value>
				<costList>
					<ST_PoisonExtract MayRequire="TSP.Isengriff.Storytime">15</ST_PoisonExtract>
					<ComponentIndustrial>10</ComponentIndustrial>
				</costList>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	<!-- Shamelessly taken from the original Toxin Mod -->
	<!-- https://www.steamcommunity.com/sharedfiles/filedetails/?id=3007282113 -->
	<Operation Class="PatchOperationFindMod">
		<mods>
			<li>Tox Popper</li>
		</mods>
		<match Class="PatchOperationSequence">
			<operations>
				<li Class="PatchOperationReplace">
					<success>Always</success>
					<xpath>/Defs/ThingDef[defName="Mosi_ToxPopper"]/costList</xpath>
					<value>
						<costStuffCount Inherit="False">75</costStuffCount>
						<stuffCategories>
							<li>Metallic</li>

							<!-- Mod support -->
							<li MayRequire="Dubwise.Rimefeller">Plastic</li>
							<li MayRequire="Dubwise.Rimefeller">Composite</li>
							<li MayRequire="sarg.alphabiomes">AB_Exotic</li>
							<li MayRequire="sarg.alphabiomes">AB_ExoticMetals</li>
							<li MayRequire="biomesteam.biomescore">BMT_ChitinStuff</li>
							<li MayRequire="eltwofour.mantodeanrace">MantodeanOrganic</li>
						</stuffCategories>
						<costList>
							<ST_PoisonExtract MayRequire="TSP.Isengriff.Storytime">15</ST_PoisonExtract>
							<ComponentIndustrial>3</ComponentIndustrial>
							<Chemfuel>40</Chemfuel>
						</costList>
					</value>
				</li>
				
				<li Class="PatchOperationReplace">
				<success>Always</success>
					<xpath>/Defs/ThingDef[defName="pphhyy_ToxPumpShotgun"]/costList</xpath>
					<value>
						<costStuffCount Inherit="False">75</costStuffCount>
						<stuffCategories>
							<li>Metallic</li>

							<!-- Mod support -->
							<li MayRequire="Dubwise.Rimefeller">Plastic</li>
							<li MayRequire="Dubwise.Rimefeller">Composite</li>
							<li MayRequire="sarg.alphabiomes">AB_Exotic</li>
							<li MayRequire="sarg.alphabiomes">AB_ExoticMetals</li>
							<li MayRequire="biomesteam.biomescore">BMT_ChitinStuff</li>
							<li MayRequire="eltwofour.mantodeanrace">MantodeanOrganic</li>
						</stuffCategories>
						<costList>
							<ST_PoisonExtract MayRequire="TSP.Isengriff.Storytime">15</ST_PoisonExtract>
							<ComponentIndustrial>3</ComponentIndustrial>
						</costList>
					</value>
				</li>
				
				<li Class="PatchOperationReplace">
				<success>Always</success>
					<xpath>/Defs/ThingDef[defName="pphhyy_Tox_Minigun"]/costList</xpath>
					<value>
						<costStuffCount Inherit="False">150</costStuffCount>
						<stuffCategories>
							<li>Metallic</li>

							<!-- Mod support -->
							<li MayRequire="Dubwise.Rimefeller">Plastic</li>
							<li MayRequire="Dubwise.Rimefeller">Composite</li>
							<li MayRequire="sarg.alphabiomes">AB_Exotic</li>
							<li MayRequire="sarg.alphabiomes">AB_ExoticMetals</li>
							<li MayRequire="biomesteam.biomescore">BMT_ChitinStuff</li>
							<li MayRequire="eltwofour.mantodeanrace">MantodeanOrganic</li>
						</stuffCategories>
						<costList>
							<ST_NightFrog_Venom MayRequire="TSP.Isengriff.Storytime">20</ST_NightFrog_Venom>
							<ComponentIndustrial>7</ComponentIndustrial>
						</costList>		
					</value>
				</li>
				
				<li Class="PatchOperationReplace">
				<success>Always</success>
					<xpath>/Defs/ThingDef[defName="pphhyy_Tox_BoltActionRifle"]/costList</xpath>
					<value>
						<costStuffCount Inherit="False">75</costStuffCount>
						<stuffCategories>
							<li>Metallic</li>

							<!-- Mod support -->
							<li MayRequire="Dubwise.Rimefeller">Plastic</li>
							<li MayRequire="Dubwise.Rimefeller">Composite</li>
							<li MayRequire="sarg.alphabiomes">AB_Exotic</li>
							<li MayRequire="sarg.alphabiomes">AB_ExoticMetals</li>
							<li MayRequire="biomesteam.biomescore">BMT_ChitinStuff</li>
							<li MayRequire="eltwofour.mantodeanrace">MantodeanOrganic</li>
						</stuffCategories>
						<costList>
							<ST_PoisonExtract MayRequire="TSP.Isengriff.Storytime">15</ST_PoisonExtract>
							<ComponentIndustrial>1</ComponentIndustrial>
						</costList>	
					</value>
				</li>
				
				<li Class="PatchOperationReplace">
				<success>Always</success>
					<xpath>/Defs/ThingDef[defName="pphhyy_Tox_ChargeLance"]/costList</xpath>
					<value>
						<costStuffCount Inherit="False">300</costStuffCount>
						<stuffCategories>
							<li>Metallic</li>

							<!-- Mod support -->
							<li MayRequire="Dubwise.Rimefeller">Plastic</li>
							<li MayRequire="Dubwise.Rimefeller">Composite</li>
							<li MayRequire="sarg.alphabiomes">AB_Exotic</li>
							<li MayRequire="sarg.alphabiomes">AB_ExoticMetals</li>
							<li MayRequire="biomesteam.biomescore">BMT_ChitinStuff</li>
							<li MayRequire="eltwofour.mantodeanrace">MantodeanOrganic</li>
						</stuffCategories>
						<costList>
							<ST_NightFrog_Venom MayRequire="TSP.Isengriff.Storytime">20</ST_NightFrog_Venom>
							<ST_PoisonExtract MayRequire="TSP.Isengriff.Storytime">35</ST_PoisonExtract>
							<ComponentIndustrial>3</ComponentIndustrial>
							<ComponentSpacer>3</ComponentSpacer>
						</costList>
					</value>
				</li>
				
				<li Class="PatchOperationReplace">
				<success>Always</success>
					<xpath>/Defs/ThingDef[defName="pphhyy_Tox_Revolver"]/costList</xpath>
					<value>
						<costStuffCount Inherit="False">10</costStuffCount>
						<stuffCategories>
							<li>Metallic</li>

							<!-- Mod support -->
							<li MayRequire="Dubwise.Rimefeller">Plastic</li>
							<li MayRequire="Dubwise.Rimefeller">Composite</li>
							<li MayRequire="sarg.alphabiomes">AB_Exotic</li>
							<li MayRequire="sarg.alphabiomes">AB_ExoticMetals</li>
							<li MayRequire="biomesteam.biomescore">BMT_ChitinStuff</li>
							<li MayRequire="eltwofour.mantodeanrace">MantodeanOrganic</li>
						</stuffCategories>
						<costList>
							<ST_PoisonExtract MayRequire="TSP.Isengriff.Storytime">3</ST_PoisonExtract>
							<ComponentIndustrial>1</ComponentIndustrial>
						</costList>			
					</value>
				</li>
				
				<li Class="PatchOperationReplace">
				<success>Always</success>
					<xpath>/Defs/ThingDef[defName="pphhyy_Weapon_ToxLongSword"]/costList</xpath>
					<value>
						<costStuffCount Inherit="False">75</costStuffCount>
						<stuffCategories>
							<li>Metallic</li>

							<!-- Mod support -->
							<li MayRequire="Dubwise.Rimefeller">Plastic</li>
							<li MayRequire="Dubwise.Rimefeller">Composite</li>
							<li MayRequire="sarg.alphabiomes">AB_Exotic</li>
							<li MayRequire="sarg.alphabiomes">AB_ExoticMetals</li>
							<li MayRequire="biomesteam.biomescore">BMT_ChitinStuff</li>
							<li MayRequire="eltwofour.mantodeanrace">MantodeanOrganic</li>
						</stuffCategories>
						<costList>
							<ST_GoblinPoison MayRequire="TSP.Isengriff.Storytime">25</ST_GoblinPoison>
						</costList>
					</value>
				</li>
				
				<li Class="PatchOperationReplace">
				<success>Always</success>
					<xpath>/Defs/ThingDef[defName="pphhyy_Weapon_Toxhammer"]/costList</xpath>
					<value>
						<costStuffCount Inherit="False">75</costStuffCount>
						<stuffCategories>
							<li>Metallic</li>

							<!-- Mod support -->
							<li MayRequire="Dubwise.Rimefeller">Plastic</li>
							<li MayRequire="Dubwise.Rimefeller">Composite</li>
							<li MayRequire="sarg.alphabiomes">AB_Exotic</li>
							<li MayRequire="sarg.alphabiomes">AB_ExoticMetals</li>
							<li MayRequire="biomesteam.biomescore">BMT_ChitinStuff</li>
							<li MayRequire="eltwofour.mantodeanrace">MantodeanOrganic</li>
						</stuffCategories>
						<costList>
							<ST_GoblinPoison MayRequire="TSP.Isengriff.Storytime">25</ST_GoblinPoison>
						</costList>
					</value>
				</li>
				
				<li Class="PatchOperationReplace">
				<success>Always</success>
					<xpath>/Defs/ThingDef[defName="pphhyy_Weapon_ToxSpear"]/costList</xpath>
					<value>
						<costStuffCount Inherit="False">20</costStuffCount>
						<stuffCategories>
							<li>Metallic</li>
							<li>Stony</li>

							<!-- Mod support -->
							<li MayRequire="Dubwise.Rimefeller">Plastic</li>
							<li MayRequire="Dubwise.Rimefeller">Composite</li>
							<li MayRequire="sarg.alphabiomes">AB_Exotic</li>
							<li MayRequire="sarg.alphabiomes">AB_ExoticMetals</li>
							<li MayRequire="biomesteam.biomescore">BMT_ChitinStuff</li>
							<li MayRequire="eltwofour.mantodeanrace">MantodeanOrganic</li>
						</stuffCategories>
						<costList>
							<ST_GoblinPoison MayRequire="TSP.Isengriff.Storytime">5</ST_GoblinPoison>
						</costList>				
					</value>
				</li>
				
				<li Class="PatchOperationReplace">
				<success>Always</success>
					<xpath>/Defs/ThingDef[defName="pphhyy_Tox_AdvancedRevolver"]/costList</xpath>
					<value>
						<costStuffCount Inherit="False">45</costStuffCount>
						<stuffCategories>
							<li>Metallic</li>

							<!-- Mod support -->
							<li MayRequire="Dubwise.Rimefeller">Plastic</li>
							<li MayRequire="Dubwise.Rimefeller">Composite</li>
							<li MayRequire="sarg.alphabiomes">AB_Exotic</li>
							<li MayRequire="sarg.alphabiomes">AB_ExoticMetals</li>
							<li MayRequire="biomesteam.biomescore">BMT_ChitinStuff</li>
							<li MayRequire="eltwofour.mantodeanrace">MantodeanOrganic</li>
						</stuffCategories>
						<costList>
							<ST_GoblinPoison MayRequire="TSP.Isengriff.Storytime">3</ST_GoblinPoison>
						</costList>			
					</value>
				</li>
				
				<li Class="PatchOperationReplace">
				<success>Always</success>
					<xpath>/Defs/ThingDef[defName="pphhyy_Tox_AdvancedMinigun"]/costList</xpath>
					<value>
						<costStuffCount Inherit="False">400</costStuffCount>
						<stuffCategories>
							<li>Metallic</li>

							<!-- Mod support -->
							<li MayRequire="Dubwise.Rimefeller">Plastic</li>
							<li MayRequire="Dubwise.Rimefeller">Composite</li>
							<li MayRequire="sarg.alphabiomes">AB_Exotic</li>
							<li MayRequire="sarg.alphabiomes">AB_ExoticMetals</li>
							<li MayRequire="biomesteam.biomescore">BMT_ChitinStuff</li>
							<li MayRequire="eltwofour.mantodeanrace">MantodeanOrganic</li>
						</stuffCategories>
						<costList>
							<ST_NightFrog_Venom MayRequire="TSP.Isengriff.Storytime">30</ST_NightFrog_Venom>
							<ComponentSpacer>1</ComponentSpacer>
							<ComponentIndustrial>20</ComponentIndustrial>
						</costList>		
					</value>
				</li>
				
				<li Class="PatchOperationReplace">
				<success>Always</success>
					<xpath>/Defs/ThingDef[defName="pphhyy_Tox_AdvancedBoltActionRifle"]/costList</xpath>
					<value>
						<costStuffCount Inherit="False">75</costStuffCount>
						<stuffCategories>
							<li>Metallic</li>

							<!-- Mod support -->
							<li MayRequire="Dubwise.Rimefeller">Plastic</li>
							<li MayRequire="Dubwise.Rimefeller">Composite</li>
							<li MayRequire="sarg.alphabiomes">AB_Exotic</li>
							<li MayRequire="sarg.alphabiomes">AB_ExoticMetals</li>
							<li MayRequire="biomesteam.biomescore">BMT_ChitinStuff</li>
							<li MayRequire="eltwofour.mantodeanrace">MantodeanOrganic</li>
						</stuffCategories>
						<costList>
							<ST_GoblinPoison MayRequire="TSP.Isengriff.Storytime">10</ST_GoblinPoison>
							<ComponentIndustrial>2</ComponentIndustrial>
						</costList>			
					</value>
				</li>
				
				<li Class="PatchOperationReplace">
				<success>Always</success>
					<xpath>/Defs/ThingDef[defName="pphhyy_AdvancedToxPumpShotgun"]/costList</xpath>
					<value>
						<costStuffCount Inherit="False">80</costStuffCount>
						<stuffCategories>
							<li>Metallic</li>

							<!-- Mod support -->
							<li MayRequire="Dubwise.Rimefeller">Plastic</li>
							<li MayRequire="Dubwise.Rimefeller">Composite</li>
							<li MayRequire="sarg.alphabiomes">AB_Exotic</li>
							<li MayRequire="sarg.alphabiomes">AB_ExoticMetals</li>
							<li MayRequire="biomesteam.biomescore">BMT_ChitinStuff</li>
							<li MayRequire="eltwofour.mantodeanrace">MantodeanOrganic</li>
						</stuffCategories>
						<costList>
							<ST_GoblinPoison MayRequire="TSP.Isengriff.Storytime">10</ST_GoblinPoison>
							<ComponentIndustrial>2</ComponentIndustrial>
						</costList>				
					</value>
				</li>
				<li Class="PatchOperationAdd">
					<success>Always</success>
					<xpath>/Defs/ThingDef[defName="Mosi_ToxPopper"]/apparel/tags</xpath>
					<value>
						<li>GoblinPoison_Backpack</li>
					</value>
				</li>
			</operations>
		</match>
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
	<xpath>/Defs/ThingDef[defName="Apparel_PackTox"]</xpath>
		<!-- If it does, add this. -->
		<match Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>/Defs/ThingDef[defName="Apparel_PackTox"]/apparel/tags</xpath>
			<value>
				<li>GoblinPoison_Backpack</li>
				<li>BeltDefenseTox</li>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
	<xpath>/Defs/ThingDef[defName="Mosi_ToxPopper"]</xpath>
		<!-- If it does, add this. -->
		<match Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>/Defs/ThingDef[defName="Mosi_ToxPopper"]/apparel/tags</xpath>
			<value>
				<li>GoblinPoison_Backpack</li>
				<li>BeltDefenseTox</li>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
	<xpath>/Defs/ThingDef[defName="pphhyy_ToxPumpShotgun"]</xpath>
		<!-- If it does, LET'S FASTING GOOOOOOOOOO!!! -->
		<match Class="PatchOperationSequence">
			<!-- <success>Always</success> -->
			<operations>
				<li Class="PatchOperationAdd">
					<success>Always</success>
					<xpath>/Defs/ThingDef[defName ="pphhyy_ToxPumpShotgun"] or defName = "pphhyy_Tox_BoltActionRifle" or defName = "pphhyy_Tox_Revolver or defName = "pphhyy_Weapon_ToxLongSword" or defName = "pphhyy_Weapon_Toxhammer" or defName = "pphhyy_Weapon_ToxSpear" or defName = "pphhyy_Tox_AdvancedRevolver" or defName = "pphhyy_Tox_AdvancedBoltActionRifle" or defName = "pphhyy_AdvancedToxPumpShotgun"]/weaponTags</xpath>
					<value>
						<li>GoblinPoison_Backpack</li>
					</value>
				</li>
			</operations>
		</match>
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
	<xpath>/Defs/ThingDef[defName="pphhyy_ToxPumpShotgun"]</xpath>
		<!-- If it does, LET'S FASTING GOOOOOOOOOO!!! -->
		<match Class="PatchOperationSequence">
			<!-- <success>Always</success> -->
			<operations>
				<li Class="PatchOperationAdd">
					<success>Always</success>
					<xpath>/Defs/ThingDef[defName = "pphhyy_Weapon_Toxhammer" or defName = "pphhyy_Weapon_ToxSpear"]/weaponTags</xpath>
					<value>
						<li>GoblinBasic</li>
					</value>
				</li>
				
				<li Class="PatchOperationAdd">
					<success>Always</success>
					<xpath>/Defs/ThingDef[defName="pphhyy_Tox_Revolver" or defName = "pphhyy_Weapon_ToxLongSword" or defName = "pphhyy_Tox_AdvancedRevolver"]/weaponTags</xpath>
					<value>
						<li>GoblinDecent</li>
					</value>
				</li>
				
				<li Class="PatchOperationAdd">
					<success>Always</success>
					<xpath>/Defs/ThingDef[defName = "pphhyy_Tox_AdvancedBoltActionRifle" or defName = "pphhyy_AdvancedToxPumpShotgun"]/weaponTags</xpath>
					<value>
						<li>GoblinAdvanced</li>
					</value>
				</li>
				
				<li Class="PatchOperationAdd">
					<success>Always</success>
					<xpath>/Defs/ThingDef[defName = "pphhyy_Tox_Minigun" or defName = "pphhyy_Tox_ChargeLance" or defName = "pphhyy_Tox_AdvancedMinigun"]/weaponTags</xpath>
					<value>
						<li>GoblinDoomsday</li>
					</value>
				</li>
			</operations>
		</match>
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
	<xpath>/Defs/ThingDef[defName="Gun_ToxicNeedle"]</xpath>
		<!-- If it does, add this. -->
		<match Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>/Defs/ThingDef[defName="Gun_ToxicNeedle"]/weaponTags</xpath>
			<value>
				<li>GoblinDoomsday</li>
				<li>Gun_ToxicNeedle</li>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
	<xpath>/Defs/ThingDef[defName = "Gun_ToxicNeedle" or defName = "pphhyy_Tox_Revolver" or defName = "pphhyy_Tox_Revolver" or defName = "pphhyy_Tox_Minigun"]</xpath>
		<!-- If it does, do this replacement. -->
		<match Class="PatchOperationReplace">
			<success>Always</success>
			<xpath>/Defs/PawnKindDef[defName="PPHHYY_DoomsDay_Goblin"]/weaponTags</xpath>
			<value>
				<li>GoblinDoomsday</li>
				<li>Gun_ToxicNeedle</li>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- DO THE GENTILES KNOW? -->
	<xpath>/Defs/ThingDef[defName="Romy_RawToxipods"]</xpath>
		<!-- If they do, SHUT IT DOWN. -->
		<match Class="PatchOperationRemove">
			<success>Always</success>
			<xpath>/Defs/ResearchProjectDef[defName="Romy_ToxinProduction"]</xpath>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. All according to plan.-->
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- DO THE GENTILES KNOW? -->
	<xpath>/Defs/ThingDef[defName="Romy_RawToxipods"]</xpath>
		<!-- If they do, SHUT IT DOWN. -->
		<match Class="PatchOperationRemove">
			<success>Always</success>
			<xpath>/Defs/ResearchProjectDef[defName="Romy_WastepackRecycling"]</xpath>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. All according to plan.-->
	</Operation>
	
  <Operation Class="PatchOperationConditional">
    <!-- DO THE GENTILES KNOW? -->
    <xpath>/Defs/ThingDef[defName="Romy_RawToxipods"]</xpath>
    <!-- If they do, SHUT IT DOWN. -->
    <match Class="PatchOperationRemove">
      <success>Always</success>
      <xpath>/Defs/ResearchProjectDef/prerequisites/li[text()="Romy_ToxinProduction"]</xpath>
    </match>
    <!-- If the first XPATH does not exist, the original code stands. -->
  </Operation>
  
  <Operation Class="PatchOperationConditional">
    <!-- DO THE GENTILES KNOW? -->
    <xpath>/Defs/ThingDef[defName="Romy_RawToxipods"]</xpath>
    <!-- If they do, SHUT IT DOWN. -->
    <match Class="PatchOperationRemove">
      <success>Always</success>
      <xpath>/Defs/ResearchProjectDef/prerequisites/li[text()="Romy_WastepackRecycling"]</xpath>
    </match>
    <!-- If the first XPATH does not exist, the original code stands. -->
  </Operation>
</Patch>