<?xml version="1.0" encoding="utf-8" ?>

<Patch>
	<!-- Aelanna's Model No-Match Detector and Insertion Code -->
	<!-- Special thanks to Aelanna for straight-up saving me scores of headaches! -->
	<!-- Add comps field to Settlement WorldObjectDef if it doesn't exist -->
	<Operation Class="PatchOperationConditional">
		<xpath>Defs/ThingDef[defName="GRimBullfrog"]/race</xpath>
		<nomatch Class="PatchOperationAdd">
			<xpath>Defs/ThingDef[defName="GRimBullfrog"]</xpath>
			<success>Always</success>
			<value>
				<race></race>
			</value>
		</nomatch>
	</Operation>
	
	<!-- Add comps field to Settlement WorldObjectDef if it doesn't exist -->
	<Operation Class="PatchOperationConditional">
		<xpath>Defs/ThingDef[defName="GRimBullfrog"]/comps</xpath>
		<nomatch Class="PatchOperationAdd">
			<xpath>Defs/ThingDef[defName="GRimBullfrog"]</xpath>
			<success>Always</success>
			<value>
				<comps></comps>
			</value>
		</nomatch>
	</Operation>
	
	<!-- Add comps field to Settlement WorldObjectDef if it doesn't exist -->
	<Operation Class="PatchOperationConditional">
		<xpath>Defs/ThingDef[defName="GRimBullfrog"]/tradeTags</xpath>
		<nomatch Class="PatchOperationAdd">
			<xpath>Defs/ThingDef[defName="GRimBullfrog"]</xpath>
			<success>Always</success>
			<value>
				<tradeTags></tradeTags>
			</value>
		</nomatch>
	</Operation>

	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>Defs/ThingDef[defName="GRimBullfrog"]/race/leatherDef</xpath>
		<!-- If it does, do this replacement. -->
		<match Class="PatchOperationReplace">
			<success>Always</success>
			<xpath>Defs/ThingDef[defName="GRimBullfrog"]/race/leatherDef</xpath>
			<value>
				<leatherDef>Leather_Frog</leatherDef>
			</value>
		</match>
		<!-- If it DOES NOT, add this instead. -->
		<nomatch Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>Defs/ThingDef[defName="GRimBullfrog"]/race</xpath>
			<value>
				<leatherDef>Leather_Frog</leatherDef>
			</value>
		</nomatch>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
	<xpath>Defs/ThingDef[defName="GRimBullfrog"]/race/useMeatFrom</xpath>
		<!-- If it does, do this replacement. -->
		<match Class="PatchOperationReplace">
			<success>Always</success>
			<xpath>Defs/ThingDef[defName="GRimBullfrog"]/race/useMeatFrom</xpath>
			<value>
				<useMeatFrom>ST_BullFrog</useMeatFrom>
			</value>
		</match>
		<!-- If it DOES NOT, add this instead. -->
		<nomatch Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>Defs/ThingDef[defName="GRimBullfrog"]/race</xpath>
			<value>
				<useMeatFrom>ST_BullFrog</useMeatFrom>
			</value>
		</nomatch>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
	<xpath>Defs/ThingDef[defName="GRimBullfrog"]/race/lifeStageAges</xpath>
		<!-- If it does, do this replacement. -->
		<match Class="PatchOperationReplace">
			<success>Always</success>
			<xpath>Defs/ThingDef[defName="GRimBullfrog"]/race/lifeStageAges</xpath>
			<value>
				<lifeStageAges>
					<li>
						<def>AnimalBaby</def>
						<minAge>0</minAge>
						<soundAngry>ST_Frog_Angry</soundAngry>
					</li>
					<li>
						<def>AnimalJuvenile</def>
						<minAge>0.09</minAge>
						<soundAngry>ST_Frog_Angry</soundAngry>
					</li>
					<li>
						<def>AnimalAdult</def>
						<minAge>0.25</minAge>
						<soundWounded>Pawn_Iguana_Wounded</soundWounded>
						<soundDeath>Pawn_Iguana_Death</soundDeath>
						<soundCall>Pawn_Iguana_Call</soundCall>
						<soundAngry>ST_Frog_Angry</soundAngry>
					</li>
				</lifeStageAges>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
	<xpath>Defs/ThingDef[defName="GRimBullfrog"]/tradeTags</xpath>
		<!-- If it does, add this. -->
		<match Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>Defs/ThingDef[defName="GRimBullfrog"]/tradeTags</xpath>
			<value>
				<li>AnimalFrog</li>
				<li>AnimalCommon</li>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
	<xpath>Defs/ThingDef[defName="GRimBullfrog"]/race/body</xpath>
		<!-- If it does, do this replacement. -->
		<match Class="PatchOperationReplace">
			<success>Always</success>
			<xpath>Defs/ThingDef[defName="GRimBullfrog"]/race/body</xpath>
			<value>
				<body>ST_FrogLike</body>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>Defs/ThingDef[defName="TSP_ST_GRIMM_EggColorFrog_Fertilized"]/tradeTags</xpath>
		<!-- If it does, add this. -->
		<match Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>Defs/ThingDef[defName="TSP_ST_GRIMM_EggColorFrog_Fertilized"]/tradeTags</xpath>
			<value>
				<li>FertilizedFrogEgg</li>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>Defs/ThingDef[defName="GRimBullfrog"]</xpath>
		<match Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>/Defs</xpath>
			<value>
				<!--
				<ThingDef ParentName="EggUnfertBase">
					<defName>TSP_ST_GRIMM_EggColorFrog_Unfertilized</defName>
					<label>spring peeper egg (unfert.)</label>
					<description>An unfertilized colorful bullfrog egg. It can be eaten raw, but it's much, much better cooked.</description>
					<graphicData>
						<color>(254,216,177)</color>
					</graphicData>
					<statBases>
						<MarketValue Inherit="False">0.8</MarketValue>
						<Nutrition Inherit="False">0.07</Nutrition>
						<Mass Inherit="False">0.09</Mass>
					</statBases>
					<stackLimit>30</stackLimit>
					<tradeTags>
						<li>UnfertilizedFrogEgg</li>
					</tradeTags>
				</ThingDef>
				-->

				<ThingDef ParentName="EggFertBase">
					<defName>TSP_ST_GRIMM_EggColorFrog_Fertilized</defName>
					<label>colorful bullfrog egg (fert.)</label>
					<description>A fertilized colorful bullfrog egg. If all goes well, it should hatch into a colorful bullfrog tadpole. It can be eaten raw, but it's much, much better cooked.</description>
					<graphicData>
						<color>(254,216,177)</color>
					</graphicData>
					<statBases>
						<MarketValue>3.5</MarketValue>
						<Nutrition Inherit="False">0.13</Nutrition>
					</statBases>
					<comps>
						<li Class="CompProperties_Hatcher">
							<hatcherDaystoHatch>7</hatcherDaystoHatch>
							<hatcherPawn>GRimBullfrog</hatcherPawn>
						</li>
					</comps>
					<tradeTags>
						<li>FertilizedFrogEgg</li>
					</tradeTags>
				</ThingDef>
			</value>
		</match>
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>Defs/ThingDef[defName="GRimBullfrog"]/comps</xpath>
		<!-- If it does, add this. -->
		<match Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>Defs/ThingDef[defName="GRimBullfrog"]/comps</xpath>
			<value>
				<li Class="CompProperties_EggLayer">
					<eggUnfertilizedDef>BullfrogEggFertilized</eggUnfertilizedDef>
					<eggFertilizedDef>TSP_ST_GRIMM_EggColorFrog_Fertilized</eggFertilizedDef>
					<eggFertilizationCountMax>1</eggFertilizationCountMax>
					<eggLayIntervalDays>8</eggLayIntervalDays>
					<eggCountRange>2~6</eggCountRange>
				</li>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	
	<!-- Add comps field to Settlement WorldObjectDef if it doesn't exist -->
	<Operation Class="PatchOperationConditional">
		<xpath>Defs/ThingDef[defName="ThrumbaToad"]/race</xpath>
		<nomatch Class="PatchOperationAdd">
			<xpath>Defs/ThingDef[defName="ThrumbaToad"]</xpath>
			<success>Always</success>
			<value>
				<race></race>
			</value>
		</nomatch>
	</Operation>
	
	<!-- Add comps field to Settlement WorldObjectDef if it doesn't exist -->
	<Operation Class="PatchOperationConditional">
		<xpath>Defs/ThingDef[defName="ThrumbaToad"]/comps</xpath>
		<nomatch Class="PatchOperationAdd">
			<xpath>Defs/ThingDef[defName="ThrumbaToad"]</xpath>
			<success>Always</success>
			<value>
				<comps></comps>
			</value>
		</nomatch>
	</Operation>
	
	<!-- Add comps field to Settlement WorldObjectDef if it doesn't exist -->
	<Operation Class="PatchOperationConditional">
		<xpath>Defs/ThingDef[defName="ThrumbaToad"]/tradeTags</xpath>
		<nomatch Class="PatchOperationAdd">
			<xpath>Defs/ThingDef[defName="ThrumbaToad"]</xpath>
			<success>Always</success>
			<value>
				<tradeTags></tradeTags>
			</value>
		</nomatch>
	</Operation>

	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>Defs/ThingDef[defName="ThrumbaToad"]/race/leatherDef</xpath>
		<!-- If it does, do this replacement. -->
		<match Class="PatchOperationReplace">
			<success>Always</success>
			<xpath>Defs/ThingDef[defName="ThrumbaToad"]/race/leatherDef</xpath>
			<value>
				<leatherDef>Leather_Frog</leatherDef>
			</value>
		</match>
		<!-- If it DOES NOT, add this instead. -->
		<nomatch Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>Defs/ThingDef[defName="ThrumbaToad"]/race</xpath>
			<value>
				<leatherDef>Leather_Frog</leatherDef>
			</value>
		</nomatch>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
	<xpath>Defs/ThingDef[defName="ThrumbaToad"]/race/useMeatFrom</xpath>
		<!-- If it does, do this replacement. -->
		<match Class="PatchOperationReplace">
			<success>Always</success>
			<xpath>Defs/ThingDef[defName="ThrumbaToad"]/race/useMeatFrom</xpath>
			<value>
				<useMeatFrom>Thrumbo</useMeatFrom>
			</value>
		</match>
		<!-- If it DOES NOT, add this instead. -->
		<nomatch Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>Defs/ThingDef[defName="ThrumbaToad"]/race</xpath>
			<value>
				<useMeatFrom>Thrumbo</useMeatFrom>
			</value>
		</nomatch>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
	<xpath>Defs/ThingDef[defName="GRimBullfrog"]/race/lifeStageAges</xpath>
		<!-- If it does, do this replacement. -->
		<match Class="PatchOperationReplace">
			<success>Always</success>
			<xpath>Defs/ThingDef[defName="GRimBullfrog"]/race/lifeStageAges</xpath>
			<value>
				<lifeStageAges>
					<li>
						<def>AnimalBaby</def>
						<minAge>0</minAge>
						<soundAngry>ST_Frog_Angry</soundAngry>
					</li>
					<li>
						<def>AnimalJuvenile</def>
						<minAge>0.09</minAge>
						<soundAngry>ST_Frog_Angry</soundAngry>
					</li>
					<li>
						<def>AnimalAdult</def>
						<minAge>0.25</minAge>
						<soundWounded>Pawn_Iguana_Wounded</soundWounded>
						<soundDeath>Pawn_Iguana_Death</soundDeath>
						<soundCall>Pawn_Iguana_Call</soundCall>
						<soundAngry>ST_Frog_Angry</soundAngry>
					</li>
				</lifeStageAges>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
	<xpath>Defs/ThingDef[defName="ThrumbaToad"]/tradeTags</xpath>
		<!-- If it does, add this. -->
		<match Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>Defs/ThingDef[defName="ThrumbaToad"]/tradeTags</xpath>
			<value>
				<li>AnimalFrog</li>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
	<xpath>Defs/ThingDef[defName="ThrumbaToad"]/race/body</xpath>
		<!-- If it does, do this replacement. -->
		<match Class="PatchOperationReplace">
			<success>Always</success>
			<xpath>Defs/ThingDef[defName="ThrumbaToad"]/race/body</xpath>
			<value>
				<body>ST_FrogLike</body>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>Defs/ThingDef[defName="ThrumbaToad"]/statBases/MarketValue</xpath>
		<!-- If it does, do this replacement. -->
		<match Class="PatchOperationReplace">
			<success>Always</success>
			<xpath>Defs/ThingDef[defName="ThrumbaToad"]/statBases/MarketValue</xpath>
			<value>
				<MarketValue>640</MarketValue>
			</value>
		</match>
		<!-- If it DOES NOT, add this instead. -->
		<nomatch Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>Defs/ThingDef[defName="ThrumbaToad"]/statBases</xpath>
			<value>
				<MarketValue>640</MarketValue>
			</value>
		</nomatch>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>Defs/ThingDef[defName="ThrumbaToad"]/race/neverIncludeInQuests</xpath>
		<!-- If it does, do this replacement. -->
		<match Class="PatchOperationReplace">
			<success>Always</success>
			<xpath>Defs/ThingDef[defName="ThrumbaToad"]/race/neverIncludeInQuests</xpath>
			<value>
				<neverIncludeInQuests>false</neverIncludeInQuests>
			</value>
		</match>
		<!-- If it DOES NOT, add this instead. -->
		<nomatch Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>Defs/ThingDef[defName="ThrumbaToad"]/race</xpath>
			<value>
				<neverIncludeInQuests>false</neverIncludeInQuests>
			</value>
		</nomatch>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>Defs/ThingDef[defName="ThrumbaToad"]</xpath>
		<match Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>/Defs</xpath>
			<value>
				<!--
				<ThingDef ParentName="EggUnfertBase">
					<defName>TSP_ST_GRIMM_EggThrumboFrog_Unfertilized</defName>
					<label>spring peeper egg (unfert.)</label>
					<description>An unfertilized Thrumba Toad egg. It can be eaten raw, but it's much, much better cooked.</description>
					<graphicData>
						<color>(254,216,177)</color>
					</graphicData>
					<statBases>
						<MarketValue Inherit="False">0.8</MarketValue>
						<Nutrition Inherit="False">0.07</Nutrition>
						<Mass Inherit="False">0.09</Mass>
					</statBases>
					<stackLimit>30</stackLimit>
					<tradeTags>
						<li>UnfertilizedFrogEgg</li>
					</tradeTags>
				</ThingDef>
				-->

				<ThingDef ParentName="EggFertBase">
					<defName>TSP_ST_GRIMM_EggThrumboFrog_Fertilized</defName>
					<label>Thrumba Toad egg (fert.)</label>
					<description>A fertilized Thrumba Toad bullfrog egg. If all goes well, it should hatch into a Thrumba Toad tadpole. It can be eaten raw, but it's much, much better cooked.</description>
					<graphicData>
						<color>(254,216,177)</color>
					</graphicData>
					<statBases>
						<MarketValue>3.5</MarketValue>
						<Nutrition Inherit="False">0.13</Nutrition>
					</statBases>
					<comps>
						<li Class="CompProperties_Hatcher">
							<hatcherDaystoHatch>13</hatcherDaystoHatch>
							<hatcherPawn>ThrumbaToad</hatcherPawn>
						</li>
					</comps>
					<tradeTags>
						<li>FertilizedFrogEgg</li>
					</tradeTags>
				</ThingDef>
			</value>
		</match>
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>Defs/ThingDef[defName="ThrumbaToad"]/comps</xpath>
		<!-- If it does, add this. -->
		<match Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>Defs/ThingDef[defName="ThrumbaToad"]/comps</xpath>
			<value>
				<li Class="CompProperties_EggLayer">
					<eggUnfertilizedDef>BullfrogEggFertilized</eggUnfertilizedDef>
					<eggFertilizedDef>TSP_ST_GRIMM_EggThrumboFrog_Fertilized</eggFertilizedDef>
					<eggFertilizationCountMax>3</eggFertilizationCountMax>
					<eggLayIntervalDays>11</eggLayIntervalDays>
					<eggCountRange>1~3</eggCountRange>
				</li>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
</Patch>