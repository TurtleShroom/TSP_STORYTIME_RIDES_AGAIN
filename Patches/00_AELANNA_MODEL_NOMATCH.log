<?xml version="1.0" encoding="utf-8" ?>

<Patch>
	<!-- Special thanks to BK's Nutrient Paste for Babies Mod, from which this is shamelessly derived -->
	<!-- https://www.steamcommunity.com/sharedfiles/filedetails/?id=2934118873 -->

    <!-- Add comps field to Settlement WorldObjectDef if it doesn't exist -->
    <Operation Class="PatchOperationConditional">
        <xpath>Defs/WorldObjectDef[defName="Settlement"]/comps</xpath>
        <nomatch Class="PatchOperationAdd">
            <xpath>Defs/WorldObjectDef[defName="Settlement"]</xpath>
			<success>Always</success>
            <value>
                <comps>
				</comps>
            </value>
        </nomatch>
    </Operation>

    <!-- Now that the Comps object exists, add the code -->
    <Operation Class="PatchOperationConditional">
		<xpath>Defs/WorldObjectDef[defName="Settlement"]/comps</xpath>
		<match Class="PatchOperationAdd">
			<xpath>Defs/WorldObjectDef[defName="Settlement"]/comps</xpath>
			<value>
				<li></li>
			</value>
		</match>
    </Operation>
</Patch>