<?xml version="1.0" encoding="utf-8"?>

<Patch>
	<!-- Aelanna's Model No-Match Detector and Insertion Code -->
	<!-- Special thanks to Aelanna for straight-up saving me scores of headaches! -->
	<!-- Add comps field to Settlement WorldObjectDef if it doesn't exist -->
	<Operation Class="PatchOperationConditional">
		<xpath>/Defs/TraderKindDef[defName="Caravan_Neolithic_Mining"]/stockGenerators</xpath>
		<nomatch Class="PatchOperationAdd">
			<xpath>/Defs/TraderKindDef[defName="Caravan_Neolithic_Mining"]</xpath>
			<success>Always</success>
			<value>
				<stockGenerators></stockGenerators>
			</value>
		</nomatch>
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>/Defs/TraderKindDef[defName="Caravan_Neolithic_Mining"]/stockGenerators</xpath>
		<!-- If it does, add this. -->
		<match Class="PatchOperationAdd"> 
			<success>Always</success>
			<xpath>/Defs/TraderKindDef[defName="Caravan_Neolithic_Mining"]/stockGenerators</xpath>
			<value>
				<li Class="StockGenerator_SingleDef" MayRequire="tsp.isengriff.storytime">
					<thingDef>Asbestos_Fiber</thingDef>
					<countRange>35~50</countRange>
				</li>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>/Defs/TraderKindDef[defName="Caravan_Outlander_Mining"]/stockGenerators</xpath>
		<!-- If it does, add this. -->
		<match Class="PatchOperationAdd"> 
			<success>Always</success>
			<xpath>/Defs/TraderKindDef[defName="Caravan_Outlander_Mining"]/stockGenerators</xpath>
			<value>
				<li Class="StockGenerator_SingleDef" MayRequire="tsp.isengriff.storytime">
					<thingDef>Asbestos_Fiber</thingDef>
					<countRange>40~75</countRange>
				</li>
				
				<li Class="StockGenerator_SingleDef" MayRequire="tsp.isengriff.storytime">
					<thingDef>Asbestos_Tile</thingDef>
					<countRange>-1~25</countRange>
				</li>
				
				<li Class="StockGenerator_SingleDef" MayRequire="tsp.isengriff.storytime">
					<thingDef>Asbestos_Shell</thingDef>
					<countRange>0~5</countRange>
				</li>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>/Defs/TraderKindDef[defName="Orbital_Factory"]/stockGenerators</xpath>
		<!-- If it does, add this. -->
		<match Class="PatchOperationAdd"> 
			<success>Always</success>
			<xpath>/Defs/TraderKindDef[defName="Orbital_Factory"]/stockGenerators</xpath>
			<value>
				<li Class="StockGenerator_SingleDef" MayRequire="tsp.isengriff.storytime">
					<thingDef>Asbestos_Fiber</thingDef>
					<countRange>4000~7500</countRange>
				</li>
				
				<li Class="StockGenerator_SingleDef" MayRequire="tsp.isengriff.storytime">
					<thingDef>Asbestos_Tile</thingDef>
					<countRange>100~205</countRange>
				</li>
				
				<li Class="StockGenerator_SingleDef" MayRequire="tsp.isengriff.storytime">
					<thingDef>Asbestos_Shell</thingDef>
					<countRange>0~1</countRange>
				</li>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>/Defs/TraderKindDef[defName="Orbital_Mining"]/stockGenerators</xpath>
		<!-- If it does, add this. -->
		<match Class="PatchOperationAdd"> 
			<success>Always</success>
			<xpath>/Defs/TraderKindDef[defName="Orbital_Mining"]/stockGenerators</xpath>
			<value>
				<li Class="StockGenerator_SingleDef" MayRequire="tsp.isengriff.storytime">
					<thingDef>Asbestos_Fiber</thingDef>
					<countRange>4000~7500</countRange>
				</li>
				
				<li Class="StockGenerator_SingleDef" MayRequire="tsp.isengriff.storytime">
					<thingDef>Asbestos_Tile</thingDef>
					<countRange>100~205</countRange>
				</li>
				
				<li Class="StockGenerator_SingleDef" MayRequire="tsp.isengriff.storytime">
					<thingDef>Asbestos_Shell</thingDef>
					<countRange>25~50</countRange>
				</li>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>/Defs/TraderKindDef[defName="Caravan_Neolithic_Mining"]/stockGenerators</xpath>
		<!-- If it does, add this. -->
		<match Class="PatchOperationAdd"> 
			<success>Always</success>
			<xpath>/Defs/TraderKindDef[defName="Caravan_Neolithic_Mining"]/stockGenerators</xpath>
			<value>
				<li Class="StockGenerator_SingleDef" MayRequire="tsp.isengriff.storytime">
					<thingDef>Asbestos_Fiber</thingDef>
					<countRange>35~50</countRange>
				</li>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>/Defs/TerrainDef[defName="VFEM2_Matting_Burned"]</xpath>
		<!-- If it does, add this. -->
		<match Class="PatchOperationAdd"> 
			<success>Always</success>
			<xpath>/Defs</xpath>
			<value>
				<TerrainDef ParentName="FloorBase">
					<defName>TSP_ST_VFEM2_Matting_Asbestos</defName>
					<label>asbestine matting</label>
					<description>Rough matting made from interwoven asbestos fibers. It's rustic, cozy, and boosts the beauty of the room it's in. Unlike most carpet, asbestine matting is never, ever flammable.</description>
					<texturePath>Terrains/Matting</texturePath>
					<color>(145,157,118)</color>
					<ignoreIllegalLabelCharacterConfigError>true</ignoreIllegalLabelCharacterConfigError>
					<burnedDef>VFEM2_Matting_Burned</burnedDef>
					<!-- <designatorDropdown>VFEM2_Floor_Matting</designatorDropdown> -->
					<costList>
						<Asbestos_Fiber>5</Asbestos_Fiber>
					</costList>
					<tags>
						<li>Floor</li>
					</tags>
					<researchPrerequisites>
						<li>VFEM2_MedievalArchitecture</li>
					</researchPrerequisites>
					<statBases>
						<MarketValue>0</MarketValue>
						<Beauty>2</Beauty>
						<Flammability>0</Flammability>
						<WorkToBuild>800</WorkToBuild>
						<CleaningTimeFactor>1.05</CleaningTimeFactor>
					</statBases>
					<uiOrder>1999</uiOrder>
					<!-- <renderPrecedenceStart>200</renderPrecedenceStart> -->
				</TerrainDef>
				
				<TerrainDef ParentName="FloorBase">
					<defName>TSP_ST_VFEM2_Matting_Asbestos_Deluxe</defName>
					<label>fine asbestine matting</label>
					<description>Luxurious, beautifull patterned matting made from interwoven asbestine fibers. It's rustic, cozy, and greatly boosts the beauty of the room it's in. Unlike most carpet, asbestine matting is never, ever flammable.</description>
					<ignoreIllegalLabelCharacterConfigError>true</ignoreIllegalLabelCharacterConfigError>
					<burnedDef>VFEM2_Matting_Burned</burnedDef>
					<!-- <designatorDropdown>VFEM2_Floor_Matting</designatorDropdown> -->
					<texturePath>Terrains/FineMatting</texturePath>
					<color>(145,157,118)</color>
					<costList>
						<Asbestos_Fiber>20</Asbestos_Fiber>
					</costList>
					<tags>
						<li>Floor</li>
						<li>FloorFine</li>
					</tags>
					<researchPrerequisites>
						<li>VFEM2_MedievalArchitecture</li>
					</researchPrerequisites>
					<statBases>
						<MarketValue>1</MarketValue>
						<Beauty>4</Beauty>
						<Flammability>0</Flammability>
						<WorkToBuild>990</WorkToBuild>
						<CleaningTimeFactor>1.05</CleaningTimeFactor>
					</statBases>
					<uiOrder>1999</uiOrder>
					<!-- <renderPrecedenceStart>200</renderPrecedenceStart> -->
				</TerrainDef>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
</Patch>